## 기능 요구사항
- 사용자의 위치(경도와 위도 쌍)와 검색 반경 정보에 매치되는 사업장 목록을 반환
- 사업장 소유주가 사업장 정보를 추가, 삭제, 갱신할 수 있도록 하되, 그 정보가 검색 결과에 실시간으로 반영될 필요는 없다고 가정
- 고객은 사업장의 상세 정보를 살필 수 있어야 함

## 개략적 규모 추정
- DAU는 1억명, 등록된 사업장 수는 2억이라고 하자.
- 한 사용자는 하루에 5회 검색을 시도한다고 가정한다.
- QPS (Query per second) : (1억 X 5) / 10^5 = 5,000


API 설계
- GET /V1/search/nearby (특정 검색 기준에 맞는 사업장 목록 반환 API
```  
response body
{
	"total" : 10,
  "businesses" : [{business object}]
}
```


- GET /v1/business/{id}
- POST /v1/business
- PUT /v1/business/{id}
- DELETE /v1/business/{id}



![image](https://github.com/user-attachments/assets/c13240a7-82a3-40e2-8885-9f9dfea6c753)


#### 위치 기반 서비스 (LBS)
- LBS는 시스템의 핵심 부분으로, 주어진 위치와 반경 정보를 이용해 주변 사업장을 검색한다.
- 위치 알고리즘으로는 지오해시, 쿼드트리, S2 사용을 추천한다.

#### 상세 설계
데이터베이스 규모 확장
- 사업장 정보 테이블
   - 사업장 ID를 기준으로 샤딩(sharding)을 적용하여 부하 분산
   - 샤딩 : 대규모 데이터베이스의 데이터를 여러 서버에 분산시켜 저장하는 방법
- 지리 정보 색인 테이블
  -  같은 지오해시에 속한 사업장 ID 각각을 별도 열로 저장 (geohash, business_id)
  -  지리 정보 추정은 1.71G로 샤딩을 안해도 되므로 트래픽이 급증할때는 여러 데이터베이스 서버로 부하를 분산하는 것이 좋다(https://dev.mysql.com/doc/refman/5.7/en/group-replication-primary-secondary-replication.html)
 
- 


https://dev.mysql.com/doc/refman/5.7/en/group-replication-primary-secondary-replication.html
