# 9장 S3와 유사한 객체 저장소

저장소 시스템에는 세 가지 부류가 있다.

- 블록 저장소
- 파일 저장소
- 객체 저장소

### 블록 저장소

블록 저장소는 HDD, SSD 처럼 서버에 물리적으로 연결되는 형태의 드라이브는 블록 저장소의 가장 흔한 형태다.

데이터를 고정 크기의 블록 단위로 나누어 저장하는 방식으로 각각의 블록은 고유 주소를 가지고 있으며, 운영체제가 직접 블록을 조합해서 파일을 구성한다.

### 파일 저장소

파일 저장소는 블록 저장소 위에 구현된다.

파일과 디렉터리를 손쉽게 다루는데 필요한, 더 높은 수준의 추상화를 제공한다.

파일저장소를 사용하는 서버는 블록을 직접 제어하고, 볼륨을 포맷하는 등의 까다로운 작업을 신경 쓸 필요가 없도록 인터페이스 역할을 한다.

### 객체 저장소

객체 저장소는 새로운 형태의 저장소다. 

파일 하나하나를 객체로 저장하고, 메타데이터와 고유 식별자(ID)와 함께 저장하는 방식이다. 

객체는 파일 시스템 구조가 없으며, URL 또는 키로 접근한다.

실시간으로 갱신할 필요가 없는 상대적으로 차가운 데이터 보관에 초점을 맞춘다.

### 비교

![Image](https://github.com/user-attachments/assets/0aaa578f-acfa-4300-a4cf-51840bd98017)

### 객체 저장소의 속성

- 객체 불변성
- 키-값 저장소
- 저장은 1회, 읽기는 여러 번

그리고 객체저장소는 메타데이터와 객체의 실제 데이터를 분리하여 저장한다.

이렇게 저장하면 자주 조회되는 메타데이터와 분리하여 성능, 확장성 등등을 향상 시킬 수 있다.

![Image](https://github.com/user-attachments/assets/c5709a71-ee80-4d3c-9b68-efac26ae7e2e)


### 객체 업로드

![Image](https://github.com/user-attachments/assets/348919d9-3036-4a1c-88f2-943db2728d70)

버킷 메타데이터 생성 → 객체 데이터 업로드 → 객체 메타데이터 저장 

### 객체 다운로드

![Image](https://github.com/user-attachments/assets/e15c0414-ef73-4c2c-9a7b-e7616bfe92f8)

키로 메타데이터를 조회 → 객체 위치 알아냄 → 데이터에 접근

### 큰 파일의 업로드 성능 최적화

크기가 큰 파일을 업로드할때 중간에 네트워크에 대한 문제가 생기면 처음부터 다시 업로드해야 한다.

해당 문제를 해결하기 위해 큰 객체를 작게 쪼갠 다음 독립적으로 업로드 하는 방법인 **멀티파트** 업로드 방식을 사용하면 된다.

네트워크 오류 발생 시에도 중단된 조각만 재업로드하면 되므로 효율적이고 안정적이다.

![Image](https://github.com/user-attachments/assets/dee8687a-6434-4ecf-9ae4-deffb916c727)






